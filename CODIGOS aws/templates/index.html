<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Control de Carrito IoT</title>
    <!-- Bootstrap CSS y archivo de estilos personalizados -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/styles.css') }}">
</head>
<body>

    <!-- Header -->
    <div class="header">Control de Carrito IoT</div>

    <!-- Input Container -->
    <div class="input-container">
        <label for="name">Escribe tu nombre:</label>
        <input type="text" id="name" placeholder="Tu nombre">
    </div>

    <!-- Car Animation -->
    <div class="car-container">
        <img id="car" src="static/images/tanque.png" alt="Carrito">
        <div id="front-lights" class="lights front"></div>
        <div id="back-lights" class="lights back"></div>
        <div id="left-lights" class="lights left"></div>
        <div id="right-lights" class="lights right"></div>
    </div>

    <!-- Controller Buttons -->
    <div class="controller"> 
        <button id="up-left" data-direction="up-left">↖</button>
        <button id="up" data-direction="up">↑</button>
        <button id="up-right" data-direction="up-right">↗</button>
        <button id="left" data-direction="left">←</button>
        <button id="stop" data-direction="stop">◼</button>
        <button id="right" data-direction="right">→</button>
        <button id="down" data-direction="down">↓</button>
    </div>

    <!-- Último Registro -->
    <div class="container my-5">
        <h2 class="text-center">Último Registro</h2>
        <div class="table-responsive">
            <table class="table custom-table">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Nombre</th>
                        <th>IP Cliente</th>
                        <th>Status</th>
                        <th>Fecha</th>
                        <th>ID del Dispositivo</th>
                    </tr>
                </thead>
                <tbody id="last-record">
                    <tr>
                        <td colspan="6" class="text-center">Cargando...</td>
                    </tr>
                </tbody>
            </table>
        </div>
        <button id="fetchAllRecords" style="background: none; border: none;">
            <i class="fas fa-eye closed" id="eyeIcon"></i>
        </button>
    </div>

    <!-- Todos los Registros -->
    <div class="container my-5">
        <h2 class="text-center">Todos los Registros</h2>
        <div id="allRecordsContainer" class="table-responsive" style="display: none;">
            <table class="table custom-table">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Nombre</th>
                        <th>IP Cliente</th>
                        <th>Status</th>
                        <th>Fecha</th>
                        <th>ID del Dispositivo</th>
                    </tr>
                </thead>
                <tbody id="all-records">
                    <tr>
                        <td colspan="6" class="text-center">No hay registros disponibles</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jsSHA/3.2.0/sha.js"></script>

    <!-- Scripts separados en archivos -->
    <script type="module" src="static/js/main.js"></script>
    <script type="module" src="static/js/animations.js"></script>
    <script type="module" src="static/js/Get_last_status.js"></script>
    <script type="module" src="static/js/fetchRecords.js"></script>
    <script type="module" src="static/js/config.js"></script>

</body>
</html>
